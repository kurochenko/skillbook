{"id":"skill-book-0b8","title":"Create CLI entry point with citty","description":"Set up the main CLI entry point using citty:\n\n- Create src/cli.ts with citty defineCommand\n- Register subcommands: add, init, list\n- Set up bin entry in package.json\n- Test with `bun run src/cli.ts --help`\n\nReference: https://github.com/unjs/citty","status":"closed","priority":2,"issue_type":"task","owner":"kurochenko@gmail.com","created_at":"2026-01-23T18:00:54.587373+01:00","created_by":"Andrej Kurocenko","updated_at":"2026-01-23T18:14:46.917682+01:00","closed_at":"2026-01-23T18:14:46.917682+01:00","close_reason":"CLI entry point created in src/cli.ts with citty defineCommand and subcommands","dependencies":[{"issue_id":"skill-book-0b8","depends_on_id":"skill-book-azn","type":"blocks","created_at":"2026-01-23T18:01:15.910939+01:00","created_by":"Andrej Kurocenko"}]}
{"id":"skill-book-12m","title":"Implement status naming convention","description":"## Task: Update Status Names in Code\n\nImplement the agreed-upon status naming convention.\n\n## Status Types\n\n```typescript\ntype SkillSyncStatus = 'ok' | 'ahead' | 'behind' | 'unlinked' | 'conflict'\n```\n\n## Display\n\n| Status | Badge | Color | Meaning |\n|--------|-------|-------|---------|\n| ok | `[✓]` | green | Symlinked, up to date |\n| ahead | `[ahead]` | yellow | Symlinked, local has unpushed changes |\n| behind | `[behind]` | cyan | Symlinked, library has updates |\n| unlinked | `[unlinked]` | dim | Real file = library (safe to sync) |\n| conflict | `[conflict]` | red | Real file ≠ library (choose action) |\n\nLOCAL section: skills not in library (push first)\nAVAILABLE section: skills in library, not installed\n\n## Actions per Status\n\n- `[✓]` → `[u]ninstall`\n- `[ahead]` → `[p]ush`, `[u]ninstall`\n- `[behind]` → `[pull]`, `[u]ninstall`\n- `[unlinked]` → `[s]ync`, `[u]ninstall`\n- `[conflict]` → `[s]ync` (use library), `[p]ush` (use local)\n- LOCAL → `[p]ush`\n- AVAILABLE → `[i]nstall`\n\n## Files to Update\n\n- [ ] `src/lib/project.ts` - SkillSyncStatus type and detection logic\n- [ ] `src/tui/App.tsx` - StatusBadge and HelpBar components\n- [ ] `docs/SKILL-SYNC-VISION.md` - Update status documentation","notes":"## Extended Design: Per-Harness Tree View\n\n### Display Logic\n- **Unanimous state**: Show skill on single line with status badge\n- **Discrepancy**: Show tree with per-harness entries\n\n### Harness-Level Statuses (only for real files)\n| Status | Badge | Meaning |\n|--------|-------|---------|\n| ok | [✓] | Symlinked to .skillbook |\n| detached | [detached] | Real file, matches library |\n| conflict | [conflict] | Real file, differs from library |\n\nNote: ahead/behind are skill-level only (symlinks share same source)\nNote: Don't show missing - just omit harness from tree\n\n### Example Display\nINSTALLED\n  [✓] beads                    \u003c- unanimous, all symlinked\n  typescript-cli               \u003c- discrepancy, show tree\n    |- claude-code    [✓]\n    +- opencode       [conflict]\n\n### Actions\n| Level | Key | Action |\n|-------|-----|--------|\n| Skill | i | Install to all enabled harnesses |\n| Skill | u | Uninstall from all harnesses (prompt) |\n| Skill | p | Push to library |\n| Harness entry | s | Use this as source -\u003e push to library and sync all (prompt) |\n\n### Navigation\nTwo-level selection - cursor can be on skill OR harness entry","status":"closed","priority":1,"issue_type":"task","owner":"kurochenko@gmail.com","created_at":"2026-01-24T23:20:02.259856+01:00","created_by":"Andrej Kurocenko","updated_at":"2026-01-25T00:10:18.466128+01:00","closed_at":"2026-01-25T00:10:18.466128+01:00","close_reason":"Implemented per-harness tree view with two-level navigation, status badges (ok/detached/conflict), and 'use as source' action with confirmation prompts"}
{"id":"skill-book-2se","title":"Implement harness states and actions (enable/remove/detach)","description":"## Task: Update Harness Tab with New States and Actions\n\n### Harness States\n- `[✓]` Enabled - Fully managed, all skills symlinked\n- `[~]` Partial - Folder exists but not fully managed (mixed state)\n- `[—]` Available - No folder exists\n\n### Actions\n- `e` Enable - Add to config, sync all skills\n- `r` Remove - Delete harness folder (confirm)\n- `d` Detach - Convert symlinks to real files\n\n### Implementation\n- [ ] Add HarnessState type (enabled/partial/available)\n- [ ] Update getHarnessesInfo to detect state\n- [ ] Implement enable/remove/detach functions\n- [ ] Update TUI rendering and help bar\n- [ ] Only confirm Remove action (destructive)","status":"closed","priority":1,"issue_type":"task","owner":"kurochenko@gmail.com","created_at":"2026-01-25T00:42:40.643208+01:00","created_by":"Andrej Kurocenko","updated_at":"2026-01-25T00:46:47.400372+01:00","closed_at":"2026-01-25T00:46:47.400372+01:00","close_reason":"Implemented harness states (enabled/partial/available) and actions (enable/remove/detach) with context-sensitive help bar and confirmation for destructive remove action"}
{"id":"skill-book-3fz","title":"Implement skillbook init command","description":"Implement the `skillbook init` command:\n\n- Scan library for available skills\n- Show interactive multi-select checkbox using @clack/prompts\n- Ask which tools to configure (Claude Code, Cursor, OpenCode)\n- Create symlinks from tool locations to library:\n  - Claude Code: .claude/skills/\u003cname\u003e/SKILL.md\n  - Cursor: .cursor/rules/\u003cname\u003e.md\n  - OpenCode: .opencode/skills/\u003cname\u003e.md\n- Print summary of created symlinks\n\nThis is the main user-facing command for setting up skills in a project.","status":"closed","priority":2,"issue_type":"task","owner":"kurochenko@gmail.com","created_at":"2026-01-23T18:01:00.689761+01:00","created_by":"Andrej Kurocenko","updated_at":"2026-01-24T09:30:32.694958+01:00","closed_at":"2026-01-24T09:30:32.694958+01:00","close_reason":"Closed","dependencies":[{"issue_id":"skill-book-3fz","depends_on_id":"skill-book-0b8","type":"blocks","created_at":"2026-01-23T18:01:16.304861+01:00","created_by":"Andrej Kurocenko"},{"issue_id":"skill-book-3fz","depends_on_id":"skill-book-e35","type":"blocks","created_at":"2026-01-23T18:01:16.369209+01:00","created_by":"Andrej Kurocenko"}]}
{"id":"skill-book-3l5","title":"Architecture: Sparse checkout + hard copies","description":"## Overview\n\nReplace symlink-based sync with sparse checkout + hard copies architecture.\n\n## Why\n\nSymlinks have critical issues:\n- Non-portable (breaks for non-skillbook users)\n- Git noise (symlinks to missing files)\n- Cross-platform problems\n- Clone doesn't resolve symlinks\n\n## New Architecture\n\n```\n~/.config/skillbook/              # Master library (full git repo)\nproject/.skillbook/               # Sparse checkout (gitignored)\nproject/.claude/skills/           # Hard copies (committed)\n```\n\n## Implementation Phases\n\n### Phase 1: Sparse Checkout Foundation\n- [ ] Create .skillbook/ as sparse checkout of master library\n- [ ] Auto-add .skillbook/ to .gitignore\n- [ ] Create .skillbook/config.yaml for project preferences\n- [ ] Update init to use hard copies instead of symlinks\n\n### Phase 2: Sync Commands\n- [ ] skillbook status - compare harness \u003c-\u003e library\n- [ ] skillbook sync - bidirectional sync\n- [ ] skillbook pull - library -\u003e harness\n- [ ] skillbook push - harness -\u003e library\n\n### Phase 3: Polish\n- [ ] Conflict detection and resolution\n- [ ] Diff display before sync\n- [ ] Undo support\n\n## Key Design Decisions\n\n1. **No state tracking files** - direct file comparison\n2. **Project config in .skillbook/** - per-project harness preferences\n3. **Git is enabler, CLI is interface** - users don't need to know git\n4. **Harness files are committed** - works for non-skillbook users\n\nSee docs/SKILL-SYNC-VISION.md for full architecture details.","status":"closed","priority":1,"issue_type":"task","owner":"kurochenko@gmail.com","created_at":"2026-01-24T11:55:28.910066+01:00","created_by":"Andrej Kurocenko","updated_at":"2026-01-24T11:55:41.23254+01:00","closed_at":"2026-01-24T11:55:41.23254+01:00","close_reason":"Duplicate of skill-book-db8"}
{"id":"skill-book-3vt","title":"Implement eject command","description":"## Overview\n\n`skillbook eject` converts symlinks back to real files and removes .skillbook/.\n\n## Flow\n\n1. Show what will happen\n2. Let user select which harnesses to eject to\n3. Copy files from .skillbook/skills/ to selected harnesses\n4. Remove symlinks\n5. Remove .skillbook/ folder\n\n## UI\n\n```\nskillbook eject\n\nEjecting will:\n  1. Copy skills to harness folders as real files\n  2. Remove symlinks\n  3. Remove .skillbook/ folder\n\nYou can run skillbook again anytime to re-setup.\n\nWhich harnesses to eject to?\n  [x] opencode\n  [ ] claude-code  (no symlinks exist)\n  [ ] cursor\n\n[Enter] Confirm  [Esc] Cancel\n```\n\n## Implementation\n\n- `ejectSkill(projectPath, skillName, harnesses)` - copy to harnesses, remove symlinks\n- `ejectAll(projectPath, harnesses)` - eject all skills\n- `removeSkillbook(projectPath)` - remove .skillbook/ folder\n\n## Edge Cases\n\n- What if harness already has real file? Skip or overwrite?\n- What if .skillbook has uncommitted changes? Warn user?\n\n## Acceptance Criteria\n\n- [ ] Can select harnesses to eject to\n- [ ] Symlinks converted to real files\n- [ ] .skillbook/ removed\n- [ ] Running skillbook again shows read-only mode\n","status":"open","priority":2,"issue_type":"task","owner":"kurochenko@gmail.com","created_at":"2026-01-24T19:21:08.40795+01:00","created_by":"Andrej Kurocenko","updated_at":"2026-01-24T19:21:08.40795+01:00","dependencies":[{"issue_id":"skill-book-3vt","depends_on_id":"skill-book-9qf","type":"blocks","created_at":"2026-01-24T19:21:21.382937+01:00","created_by":"Andrej Kurocenko"}]}
{"id":"skill-book-644","title":"Implement migration flow (setup wizard)","description":"## Overview\n\nSimplified flow - no separate migration wizard. TUI always shows same view:\n- INSTALLED: skills in harness folders (symlinks or real files)\n- AVAILABLE: skills in library not locally installed\n\nOn first sync/install action, lazy init .skillbook/ if not exists.\n\n## Updated Flow\n\n1. User opens TUI\n2. Sees installed skills with status:\n   - [synced] = folder symlink pointing to .skillbook/\n   - [unsynced] = real folder, exists in library (can sync)\n   - [unsynced*] = real folder, differs from library (needs review)\n   - [local] = real folder, not in library (push first, then sync)\n3. User presses 's' to sync\n4. If .skillbook/ doesn't exist → init sparse checkout\n5. Add to sparse checkout, replace real folder with symlink\n\n## Completed\n- [x] Sparse checkout module (8ep)\n- [x] Symlink module (9qf) - now symlinks whole folder for directory harnesses\n- [x] Update TUI skill status detection\n- [x] Implement sync action with lazy init\n- [x] Auto-detect harnesses on init\n- [x] Handle symlinked folders in skill scanning\n\n## Remaining (optional enhancements)\n- [ ] Bulk sync all unsynced skills\n- [ ] Better messaging for local-only skills (push first)","status":"closed","priority":1,"issue_type":"task","owner":"kurochenko@gmail.com","created_at":"2026-01-24T19:20:59.185205+01:00","created_by":"Andrej Kurocenko","updated_at":"2026-01-24T19:43:28.869726+01:00","closed_at":"2026-01-24T19:43:28.869726+01:00","close_reason":"Core flow complete: lazy init, folder symlinks, TUI status detection. Optional enhancements (bulk sync) can be separate tickets.","dependencies":[{"issue_id":"skill-book-644","depends_on_id":"skill-book-8ep","type":"blocks","created_at":"2026-01-24T19:21:21.144137+01:00","created_by":"Andrej Kurocenko"},{"issue_id":"skill-book-644","depends_on_id":"skill-book-9qf","type":"blocks","created_at":"2026-01-24T19:21:21.220829+01:00","created_by":"Andrej Kurocenko"},{"issue_id":"skill-book-644","depends_on_id":"skill-book-bre","type":"blocks","created_at":"2026-01-24T19:21:21.303984+01:00","created_by":"Andrej Kurocenko"}]}
{"id":"skill-book-80j","title":"Improve bulk add status and conflict display logic","description":"## Overview\n\nRefactor the bulk add command to properly handle status and conflict indicators based on the relationship between project files and the library.\n\n## Current Problems\n\n1. `[synced] ⚠ duplicate` makes no sense - synced files are identical to library, so identical to each other\n2. No diff information shown for `[changed]` status\n3. \"Duplicate\" is misleading - should indicate actual content conflicts, not just same name\n\n## Status Definitions\n\n| Status | Meaning |\n|--------|---------|\n| `[new]` | Skill name NOT in library |\n| `[synced]` | Skill name in library AND content IDENTICAL |\n| `[changed +N/-M]` | Skill name in library AND content DIFFERS (show git-style diff) |\n\n## Conflict Logic\n\n**Key insight**: Status and Conflict are NOT orthogonal.\n\n- `[synced]` can NEVER have conflict (by definition, all synced files match library, thus match each other)\n- `[new]` CAN have conflict (multiple projects, different content)\n- `[changed]` CAN have conflict (multiple projects, different changes)\n\n### Conflict indicator rules:\n\n```\nShow \"⚠ N versions\" only when:\n1. Same skill name in 2+ locations AND\n2. NOT all synced AND\n3. Content actually differs between locations\n```\n\n## Display Matrix\n\n### A) Skill NOT in library\n\n| Locations | Content | Display |\n|-----------|---------|---------|\n| 1 project | - | `[new]` |\n| 2+ projects | All identical | `[new]` (pick any) |\n| 2+ projects | Different | `[new] ⚠ N versions` |\n\n### B) Skill IN library\n\n| Locations | Content vs Library | Display |\n|-----------|-------------------|---------|\n| 1 project | Same | `[synced]` |\n| 1 project | Different | `[changed +N/-M]` |\n| 2+ projects | All same as library | `[synced]` |\n| 2+ projects | All same but ≠ library | `[changed +N/-M]` |\n| 2+ projects | Mixed/different | Individual status + `⚠ N versions` if content differs |\n\n## Implementation Tasks\n\n- [ ] Add diff calculation function (line additions/deletions vs library)\n- [ ] Update `SkillStatus` type to include diff stats\n- [ ] Update `hasDuplicates` logic to only flag actual content conflicts\n- [ ] Update display formatting to show `[changed +N/-M]`\n- [ ] Remove conflict indicator for `[synced]` items\n\n## Test Scenarios (Integration Tests Required)\n\n### New skills\n- [ ] Single new skill shows `[new]`\n- [ ] Multiple locations, same content shows `[new]` (no conflict)\n- [ ] Multiple locations, different content shows `[new] ⚠ 2 versions`\n\n### Synced skills\n- [ ] Single synced skill shows `[synced]`\n- [ ] Multiple synced (same content) shows `[synced]` (NO conflict indicator)\n\n### Changed skills\n- [ ] Single changed skill shows `[changed +N/-M]` with correct diff\n- [ ] Multiple changed, same changes shows `[changed +N/-M]` (no conflict)\n- [ ] Multiple changed, different changes shows `[changed +N/-M] ⚠ 2 versions`\n\n### Mixed scenarios\n- [ ] Same skill: 1 synced + 1 changed = changed shows conflict\n- [ ] Same skill: 1 new + 1 new different = both show conflict\n\n### Diff accuracy\n- [ ] Adding lines shows correct +N\n- [ ] Removing lines shows correct -M\n- [ ] Mixed changes show correct +N/-M\n- [ ] No changes (synced) shows no diff\n\n## Future Enhancements (Not in this PR)\n\n- Config file to track sync metadata (commit hash, timestamp)\n- `[outdated]` status when library updated after sync\n- `[modified]` status when project changed after sync\n- Merge assistance for true conflicts\n","status":"closed","priority":1,"issue_type":"task","owner":"kurochenko@gmail.com","created_at":"2026-01-24T10:54:18.249531+01:00","created_by":"Andrej Kurocenko","updated_at":"2026-01-24T11:53:45.438764+01:00","closed_at":"2026-01-24T11:53:45.438764+01:00","close_reason":"Implemented: DiffStats type, calculateDiff(), conflict logic (synced never shows conflict), [changed +N/-M] display format. 88 tests passing."}
{"id":"skill-book-8aa","title":"Add integration tests for CLI commands","description":"Add integration testing infrastructure for CLI commands.\n\n## Prerequisites\n\n1. Add `SKILLBOOK_LIBRARY` env var support in `src/lib/paths.ts`:\n   ```typescript\n   export const getLibraryPath = () =\u003e \n     process.env.SKILLBOOK_LIBRARY || expandPath(DEFAULT_LIBRARY_PATH)\n   ```\n\n## Test Infrastructure\n\n- Use temp directories for isolation (each test gets fresh library)\n- Run CLI as subprocess via `Bun.spawn`\n- Capture stdout/stderr for assertions\n- Clean up temp dirs after each test\n\n## Test Cases for `add` Command\n\n- [ ] Adds new skill to library\n- [ ] Skips when content identical\n- [ ] Prompts on overwrite (without --force)\n- [ ] Overwrites with --force\n- [ ] Extracts name from path correctly\n- [ ] Uses --name when provided\n- [ ] Errors on invalid path\n- [ ] Errors on non-.md file\n\n## Files to Create\n\n- `src/commands/__tests__/add.integration.test.ts`\n- Possibly `src/test-utils.ts` for shared test helpers","status":"open","priority":2,"issue_type":"task","owner":"kurochenko@gmail.com","created_at":"2026-01-23T19:27:41.289079+01:00","created_by":"Andrej Kurocenko","updated_at":"2026-01-23T19:27:41.289079+01:00"}
{"id":"skill-book-8ep","title":"Implement sparse checkout for .skillbook/","description":"## Overview\n\nSet up `.skillbook/` as a git sparse checkout of the library.\n\n## Tasks\n\n- [ ] Create `src/lib/sparse-checkout.ts` module\n- [ ] `initSparseCheckout(projectPath)` - clone library as sparse checkout\n- [ ] `addToSparseCheckout(projectPath, skillName)` - add skill to checkout\n- [ ] `removeFromSparseCheckout(projectPath, skillName)` - remove skill\n- [ ] `getSparseCheckoutSkills(projectPath)` - list checked-out skills\n- [ ] Handle commits and sync with library\n\n## Acceptance Criteria\n\n- [ ] Can initialize sparse checkout from library\n- [ ] Can add/remove individual skills\n- [ ] Works with local library (no remote initially)\n","status":"closed","priority":1,"issue_type":"task","owner":"kurochenko@gmail.com","created_at":"2026-01-24T19:20:28.587702+01:00","created_by":"Andrej Kurocenko","updated_at":"2026-01-24T19:36:26.983587+01:00","closed_at":"2026-01-24T19:36:26.983587+01:00","close_reason":"Implemented sparse-checkout.ts with init, add, remove, pull operations"}
{"id":"skill-book-9qf","title":"Implement symlink management for harnesses","description":"## Overview\n\nCreate symlinks from harness folders to `.skillbook/skills/`.\n\n## Tasks\n\n- [ ] `createSkillSymlink(projectPath, harnessId, skillName)` - create symlink\n- [ ] `removeSkillSymlink(projectPath, harnessId, skillName)` - remove symlink\n- [ ] `isSymlink(path)` - check if path is a symlink\n- [ ] `symlinkTarget(path)` - get symlink target\n- [ ] `syncHarnessSymlinks(projectPath, harnessId)` - create all symlinks for harness\n- [ ] `removeAllHarnessSymlinks(projectPath, harnessId)` - remove all symlinks\n\n## Symlink Paths\n\n```\n.skillbook/skills/beads/SKILL.md          ← source\n.claude/skills/beads/SKILL.md             ← symlink (relative: ../../.skillbook/skills/beads/SKILL.md)\n.opencode/skill/beads/SKILL.md            ← symlink\n.cursor/rules/beads.md                    ← symlink (different filename!)\n```\n\n## Edge Cases\n\n- Cursor uses flat files (.cursor/rules/beads.md) but source is SKILL.md\n- Handle existing real files (dont overwrite, warn user)\n- Handle broken symlinks (remove and recreate)\n\n## Acceptance Criteria\n\n- [ ] Can create/remove symlinks for each harness type\n- [ ] Symlinks use relative paths (portable)\n- [ ] Handles harness-specific path transformations\n","status":"closed","priority":1,"issue_type":"task","owner":"kurochenko@gmail.com","created_at":"2026-01-24T19:20:38.749857+01:00","created_by":"Andrej Kurocenko","updated_at":"2026-01-24T19:36:27.450587+01:00","closed_at":"2026-01-24T19:36:27.450587+01:00","close_reason":"Implemented symlinks.ts with create, remove, convert, detect operations","dependencies":[{"issue_id":"skill-book-9qf","depends_on_id":"skill-book-8ep","type":"blocks","created_at":"2026-01-24T19:21:20.986074+01:00","created_by":"Andrej Kurocenko"}]}
{"id":"skill-book-azn","title":"Project setup: Initialize TypeScript/Bun project","description":"Set up the skillbook project structure:\n\n- Initialize Bun project with `bun init`\n- Add dependencies: citty, @clack/prompts, picocolors\n- Create src/ directory structure\n- Set up package.json scripts\n- Create tsconfig.json\n\nDirectory structure:\n```\nsrc/\n├── cli.ts\n├── commands/\n├── lib/\n└── constants.ts\n```","status":"closed","priority":2,"issue_type":"task","owner":"kurochenko@gmail.com","created_at":"2026-01-23T18:00:53.22205+01:00","created_by":"Andrej Kurocenko","updated_at":"2026-01-23T18:14:32.508707+01:00","closed_at":"2026-01-23T18:14:32.508707+01:00","close_reason":"Project initialized with Bun, TypeScript, citty CLI framework, and placeholder commands"}
{"id":"skill-book-bre","title":"Implement read-only mode for uninitialized projects","description":"## Overview\n\nWhen `.skillbook/` does not exist, TUI runs in read-only mode.\n\n## Behavior\n\n- Show INSTALLED (legacy) - real files in harness folders\n- Show AVAILABLE - skills in library not locally\n- Show status badges (synced/ahead/untracked)\n- Disable install/uninstall actions\n- Show \"Setup\" option to initialize skillbook\n\n## UI Changes\n\n```\nskillbook - Read Only (not initialized)\n\nINSTALLED (legacy files)\n  [synced] beads\n  [ahead +5/-3] typescript\n  [untracked] my-custom\n\nAVAILABLE IN LIBRARY\n  [available] code-review\n\n[s] Setup skillbook  [q] Quit\n```\n\n## Detection\n\n- Check if `.skillbook/` exists and is valid sparse checkout\n- If not, enter read-only mode\n- `isInitialized(projectPath): boolean`\n\n## Acceptance Criteria\n\n- [ ] Detects when project is not initialized\n- [ ] Shows current state (legacy files + available)\n- [ ] Disables write actions\n- [ ] Shows setup option\n","status":"closed","priority":1,"issue_type":"task","owner":"kurochenko@gmail.com","created_at":"2026-01-24T19:20:48.252546+01:00","created_by":"Andrej Kurocenko","updated_at":"2026-01-24T19:29:42.106686+01:00","closed_at":"2026-01-24T19:29:42.106686+01:00","close_reason":"Simplified: no separate read-only mode, TUI same view with lazy init","dependencies":[{"issue_id":"skill-book-bre","depends_on_id":"skill-book-8ep","type":"blocks","created_at":"2026-01-24T19:21:21.065325+01:00","created_by":"Andrej Kurocenko"}]}
{"id":"skill-book-db8","title":"Architecture: Sparse checkout + symlinks","description":"## Overview\n\nImplement sparse checkout + symlinks architecture. This is the final architecture decision.\n\n## Architecture\n\n```\n~/.config/skillbook/              # Library (git repo, ALL skills)\n├── skills/\n│   ├── beads/SKILL.md\n│   └── typescript-cli/SKILL.md\n└── config.json\n\nproject/\n├── .skillbook/                   # Sparse checkout of library\n│   └── skills/\n│       ├── beads/SKILL.md        ← sparse checkout\n│       └── typescript-cli/SKILL.md\n├── .claude/skills/\n│   └── beads/SKILL.md            ← symlink → .skillbook/skills/beads/SKILL.md\n├── .opencode/skill/\n│   └── beads/SKILL.md            ← symlink\n└── .cursor/rules/\n    └── beads.md                  ← symlink\n```\n\n## Key Decisions\n\n1. **Sparse checkout** - `.skillbook/` is a sparse checkout of the library\n2. **Symlinks** - Harness folders contain symlinks to `.skillbook/skills/`\n3. **Read-only mode** - When `.skillbook/` not initialized, show current state but no actions\n4. **Progressive adoption** - User can migrate some/all skills selectively\n5. **Eject** - Convert symlinks back to real files anytime\n\n## User Flow\n\n1. First run (no .skillbook/) → Read-only mode, show legacy files + available\n2. User presses \"s\" to setup → Migration wizard\n3. Select skills to migrate → Add to library if needed, sparse checkout, symlink\n4. Select harnesses → Create symlinks for each\n5. Done → Full functionality (install, uninstall, push, sync)\n6. Eject → Back to real files\n\nSee docs/SKILL-SYNC-VISION.md for full details.\n","notes":"## Tracking Status Terminology (Git-Inspired)\n\nSkills have a **tracking status** describing their relationship to the library:\n\n| Status | Label | Meaning |\n|--------|-------|---------|\n| Not in library | [untracked] | Library doesn't track this skill yet |\n| In library, identical | [synced] | Tracked, up to date with library |\n| In library, local differs | [ahead +5/-3] | Tracked, local has changes not in library |\n| In library, library updated | [behind] | Tracked, library has newer version |\n| Both changed | [diverged] | Tracked, both have different changes |\n\n**Context-dependent visibility:**\n- add --bulk: untracked, synced, ahead (scans local files only)\n- status: All statuses (compares against project config)\n- pull: behind, diverged (checks library for updates)\n\nThis maps cleanly to git mental model:\n- Library = remote/origin\n- untracked = git untracked\n- synced = git clean/up-to-date\n- ahead = git ahead (local has unpushed changes)\n- behind = git behind (remote has changes to pull)\n- diverged = git diverged (both changed)","status":"closed","priority":1,"issue_type":"task","owner":"kurochenko@gmail.com","created_at":"2026-01-24T11:33:42.198602+01:00","created_by":"Andrej Kurocenko","updated_at":"2026-01-24T19:36:32.002358+01:00","closed_at":"2026-01-24T19:36:32.002358+01:00","close_reason":"Architecture implemented: sparse checkout for .skillbook/ + symlinks from harnesses"}
{"id":"skill-book-du6","title":"Scan TUI implementation","description":"Implemented new Ink-based TUI for scan command with status badges matching project view: (no badge) = not in library, [✓] = matches library, [conflict +N/-M] = differs from library. Includes managed project indicator, variant warnings, and single-action workflow.","status":"closed","priority":2,"issue_type":"task","owner":"kurochenko@gmail.com","created_at":"2026-01-25T13:24:31.382342+01:00","created_by":"Andrej Kurocenko","updated_at":"2026-01-25T13:25:25.541111+01:00","closed_at":"2026-01-25T13:25:25.541111+01:00","close_reason":"Implemented Ink-based TUI replacing clack prompts. Features: status badges ([✓] matches, [conflict] differs, dim for not in library), project grouping, variant warnings, [a]dd action with live refresh. Removed --bulk from add command.","comments":[{"id":1,"issue_id":"skill-book-du6","author":"Andrej Kurocenko","text":"Additional improvements made after initial close:\n\n- Changed status badges to right-aligned with clearer terminology:\n  - `[local]` (dim) - not in library\n  - `[matches]` (green) - matches library version\n  - `[differs]` (yellow) - differs from library version\n- Separate actions: `[a]dd` for local skills, `[o]verwrite` for differs\n- Added confirmation dialog for overwrite: 'This will replace the existing version'\n- Added description text: 'Find skills across projects and add them to your central library'\n- Updated legend to match new terminology\n- Removed +N/-M diff numbers for cleaner display","created_at":"2026-01-25T12:50:55Z"}]}
{"id":"skill-book-e1v","title":"Implement bulk add (--bulk flag)","description":"## Summary\nScan project for skills from multiple tool locations and let user select which to add to library.\n\n## Command\n```bash\nskillbook add --bulk\n```\n\n## Behavior\n1. Scan these locations:\n   - `.claude/skills/*/SKILL.md` (Claude Code)\n   - `.cursor/rules/*.md` (Cursor)\n   - `.opencode/skills/*.md` (OpenCode)\n\n2. Show interactive multi-select with status indicators:\n   - `[new]` - not in library\n   - `[synced]` - already in library, content identical\n   - `[changed]` - in library but content differs\n\n3. Pre-select all `[new]` skills by default\n\n4. For each selected skill:\n   - Extract name using existing `extractSkillName()`\n   - Add to library (same logic as single `add`)\n   - Show summary at end\n\n## Implementation Notes\n- Reuse `extractSkillName()` from lib/skills.ts\n- Reuse `addSkillToLibrary()` from lib/library.ts\n- Use @clack/prompts multiselect for selection\n- Add `scanProjectSkills()` function to find all skills\n\n## Acceptance Criteria\n- [ ] `--bulk` flag triggers scan mode\n- [ ] Finds skills from all 3 tool locations\n- [ ] Shows status for each found skill\n- [ ] Multi-select with all new skills pre-selected\n- [ ] Adds selected skills to library\n- [ ] Shows summary of what was added","status":"closed","priority":2,"issue_type":"task","owner":"kurochenko@gmail.com","created_at":"2026-01-23T20:53:34.830152+01:00","created_by":"Andrej Kurocenko","updated_at":"2026-01-23T20:58:38.395801+01:00","closed_at":"2026-01-23T20:58:38.395801+01:00","close_reason":"Implemented bulk add with --bulk flag. Scans .claude/skills/, .cursor/rules/, .opencode/skills/. Shows [new]/[synced]/[changed] status. 58 tests passing."}
{"id":"skill-book-e35","title":"Create path helpers and constants","description":"Create utility modules for paths and constants:\n\nsrc/lib/paths.ts:\n- getLibraryPath() -\u003e ~/.config/skillbook\n- getSkillsPath() -\u003e ~/.config/skillbook/skills\n- expandHome() -\u003e expand ~ in paths\n\nsrc/constants.ts:\n- Tool configurations (name, skill path pattern, file naming)\n- Supported tools: claude-code, cursor, opencode\n\nThese are needed by add, init, and list commands.","status":"closed","priority":2,"issue_type":"task","owner":"kurochenko@gmail.com","created_at":"2026-01-23T18:01:03.376517+01:00","created_by":"Andrej Kurocenko","updated_at":"2026-01-23T18:14:47.000924+01:00","closed_at":"2026-01-23T18:14:47.000924+01:00","close_reason":"Path helpers created in src/lib/paths.ts and constants in src/constants.ts","dependencies":[{"issue_id":"skill-book-e35","depends_on_id":"skill-book-azn","type":"blocks","created_at":"2026-01-23T18:01:15.976988+01:00","created_by":"Andrej Kurocenko"}]}
{"id":"skill-book-g06","title":"Implement ahead/behind state detection","description":"## Overview\n\nDetect when local .skillbook/ has changes not yet pushed to library (ahead) or library has changes not pulled (behind).\n\n## Current State\n\n- Statuses `[ahead]` and `[behind]` are defined in types but not detected\n- Currently all symlinked skills show as `[✓]` (ok)\n\n## Implementation\n\n### Ahead Detection\nCompare .skillbook/ git status with library:\n- Check if .skillbook/ has uncommitted changes\n- Check if .skillbook/ has commits not in library\n\n### Behind Detection  \nCompare library HEAD with .skillbook/:\n- Fetch library remote (if configured)\n- Check if library has commits not in .skillbook/\n\n## UI Changes\n\n- `[ahead +N/-M]` - yellow badge showing diff stats\n- `[behind]` - cyan badge\n- Actions: `[p]ush` for ahead, `[l]pull` for behind\n\n## Acceptance Criteria\n\n- [ ] Detect uncommitted changes in .skillbook/ as ahead\n- [ ] Detect unpushed commits as ahead (if remote configured)\n- [ ] Detect library updates as behind\n- [ ] Show appropriate badges in TUI\n- [ ] Add push/pull actions\n","status":"open","priority":2,"issue_type":"task","owner":"kurochenko@gmail.com","created_at":"2026-01-25T14:05:25.440519+01:00","created_by":"Andrej Kurocenko","updated_at":"2026-01-25T14:05:25.440519+01:00"}
{"id":"skill-book-ib0","title":"Implement skillbook list command","description":"Implement the `skillbook list` command:\n\n- Scan ~/.config/skillbook/skills/ directory\n- List all skill folders found\n- Show skill name (folder name)\n- Handle case when library doesn't exist yet\n\nExample output:\n```\nAvailable skills:\n  - beads\n  - typescript\n  - review-gitlab\n```","status":"closed","priority":2,"issue_type":"task","owner":"kurochenko@gmail.com","created_at":"2026-01-23T18:00:56.655017+01:00","created_by":"Andrej Kurocenko","updated_at":"2026-01-24T09:27:24.251148+01:00","closed_at":"2026-01-24T09:27:24.251148+01:00","close_reason":"Closed","dependencies":[{"issue_id":"skill-book-ib0","depends_on_id":"skill-book-0b8","type":"blocks","created_at":"2026-01-23T18:01:16.043855+01:00","created_by":"Andrej Kurocenko"},{"issue_id":"skill-book-ib0","depends_on_id":"skill-book-e35","type":"blocks","created_at":"2026-01-23T18:01:16.11132+01:00","created_by":"Andrej Kurocenko"}]}
{"id":"skill-book-ndj","title":"Implement skillbook add command","description":"Implement the `skillbook add \u003cpath\u003e` command.\n\n## Command Interface\n\n```bash\nskillbook add \u003cpath\u003e [--name \u003cname\u003e] [--force]\n\nArguments:\n  path              Path to skill file (required)\n\nOptions:\n  --name, -n        Skill name (optional, inferred from path if not provided)\n  --force, -f       Overwrite without asking\n```\n\n## Implementation Flow\n\n1. **Validate path**: Check file exists and is .md file\n\n2. **Determine skill name**:\n   - If --name provided: use it (validate: lowercase, alphanumeric, hyphens, 2-50 chars)\n   - Else: extract from path using patterns:\n     - `.claude/skills/\u003cname\u003e/SKILL.md` → name\n     - `.cursor/rules/\u003cname\u003e.md` → name\n     - `.opencode/skills/\u003cname\u003e.md` → name\n     - `\u003cfolder\u003e/SKILL.md` → folder name\n   - If cannot determine: error with suggestion to use --name\n\n3. **Ensure library exists**:\n   - If ~/.config/skillbook doesn't exist:\n     - Create directory\n     - `git init`\n     - Create skills/ subdirectory\n     - Initial commit: \"Initialize skillbook library\"\n\n4. **Check if skill exists in library**:\n   - If exists and --force: continue (overwrite)\n   - If exists and content identical: skip, print \"Skill 'X' already up to date\"\n   - If exists and differs: prompt \"Skill 'X' exists. Overwrite? [y/N]\"\n   - If not exists: continue\n\n5. **Write skill**:\n   - Create skills/\u003cname\u003e/ directory if needed\n   - Copy file to skills/\u003cname\u003e/SKILL.md\n\n6. **Git commit**:\n   - `git add skills/\u003cname\u003e/SKILL.md`\n   - `git commit -m \"Add skill: \u003cname\u003e\"` (or \"Update skill: \u003cname\u003e\")\n\n7. **Output**:\n   - Success message with library path\n   - Show git commit hash for reference\n\n## Name Validation\n\n```typescript\n// Valid: beads, typescript, review-gitlab, my-skill-2\n// Invalid: Beads, _beads, my skill, a, 123-skill\n/^[a-z][a-z0-9-]{1,49}$/\n```\n\n## Example Usage\n\n```bash\n# Basic usage - name inferred from path\nskillbook add .claude/skills/beads/SKILL.md\n# ✓ Added skill 'beads' to library (commit: abc123)\n\n# With explicit name\nskillbook add ./my-file.md --name typescript\n# ✓ Added skill 'typescript' to library (commit: def456)\n\n# Force overwrite\nskillbook add .claude/skills/beads/SKILL.md --force\n# ✓ Updated skill 'beads' in library (commit: ghi789)\n\n# Identical content\nskillbook add .claude/skills/beads/SKILL.md\n# ℹ Skill 'beads' already up to date, skipped\n```\n\n## Files to Create/Modify\n\n- `src/commands/add.ts` - Main command implementation\n- `src/lib/library.ts` - Library operations (init, add skill)\n- `src/lib/git.ts` - Git operations (init, commit)\n- `src/lib/skills.ts` - Skill name extraction and validation","status":"closed","priority":2,"issue_type":"task","owner":"kurochenko@gmail.com","created_at":"2026-01-23T18:00:58.331112+01:00","created_by":"Andrej Kurocenko","updated_at":"2026-01-23T19:27:46.880808+01:00","closed_at":"2026-01-23T19:27:46.880808+01:00","close_reason":"Implemented add command with name extraction, validation, git integration, overwrite handling","dependencies":[{"issue_id":"skill-book-ndj","depends_on_id":"skill-book-0b8","type":"blocks","created_at":"2026-01-23T18:01:16.176139+01:00","created_by":"Andrej Kurocenko"},{"issue_id":"skill-book-ndj","depends_on_id":"skill-book-e35","type":"blocks","created_at":"2026-01-23T18:01:16.239458+01:00","created_by":"Andrej Kurocenko"}]}
