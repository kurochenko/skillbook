{"id":"skill-book-0b8","title":"Create CLI entry point with citty","description":"Set up the main CLI entry point using citty:\n\n- Create src/cli.ts with citty defineCommand\n- Register subcommands: add, init, list\n- Set up bin entry in package.json\n- Test with `bun run src/cli.ts --help`\n\nReference: https://github.com/unjs/citty","status":"closed","priority":2,"issue_type":"task","owner":"kurochenko@gmail.com","created_at":"2026-01-23T18:00:54.587373+01:00","created_by":"Andrej Kurocenko","updated_at":"2026-01-23T18:14:46.917682+01:00","closed_at":"2026-01-23T18:14:46.917682+01:00","close_reason":"CLI entry point created in src/cli.ts with citty defineCommand and subcommands","dependencies":[{"issue_id":"skill-book-0b8","depends_on_id":"skill-book-azn","type":"blocks","created_at":"2026-01-23T18:01:15.910939+01:00","created_by":"Andrej Kurocenko"}]}
{"id":"skill-book-3fz","title":"Implement skillbook init command","description":"Implement the `skillbook init` command:\n\n- Scan library for available skills\n- Show interactive multi-select checkbox using @clack/prompts\n- Ask which tools to configure (Claude Code, Cursor, OpenCode)\n- Create symlinks from tool locations to library:\n  - Claude Code: .claude/skills/\u003cname\u003e/SKILL.md\n  - Cursor: .cursor/rules/\u003cname\u003e.md\n  - OpenCode: .opencode/skills/\u003cname\u003e.md\n- Print summary of created symlinks\n\nThis is the main user-facing command for setting up skills in a project.","status":"closed","priority":2,"issue_type":"task","owner":"kurochenko@gmail.com","created_at":"2026-01-23T18:01:00.689761+01:00","created_by":"Andrej Kurocenko","updated_at":"2026-01-24T09:30:32.694958+01:00","closed_at":"2026-01-24T09:30:32.694958+01:00","close_reason":"Closed","dependencies":[{"issue_id":"skill-book-3fz","depends_on_id":"skill-book-0b8","type":"blocks","created_at":"2026-01-23T18:01:16.304861+01:00","created_by":"Andrej Kurocenko"},{"issue_id":"skill-book-3fz","depends_on_id":"skill-book-e35","type":"blocks","created_at":"2026-01-23T18:01:16.369209+01:00","created_by":"Andrej Kurocenko"}]}
{"id":"skill-book-3l5","title":"Architecture: Sparse checkout + hard copies","description":"## Overview\n\nReplace symlink-based sync with sparse checkout + hard copies architecture.\n\n## Why\n\nSymlinks have critical issues:\n- Non-portable (breaks for non-skillbook users)\n- Git noise (symlinks to missing files)\n- Cross-platform problems\n- Clone doesn't resolve symlinks\n\n## New Architecture\n\n```\n~/.config/skillbook/              # Master library (full git repo)\nproject/.skillbook/               # Sparse checkout (gitignored)\nproject/.claude/skills/           # Hard copies (committed)\n```\n\n## Implementation Phases\n\n### Phase 1: Sparse Checkout Foundation\n- [ ] Create .skillbook/ as sparse checkout of master library\n- [ ] Auto-add .skillbook/ to .gitignore\n- [ ] Create .skillbook/config.yaml for project preferences\n- [ ] Update init to use hard copies instead of symlinks\n\n### Phase 2: Sync Commands\n- [ ] skillbook status - compare harness \u003c-\u003e library\n- [ ] skillbook sync - bidirectional sync\n- [ ] skillbook pull - library -\u003e harness\n- [ ] skillbook push - harness -\u003e library\n\n### Phase 3: Polish\n- [ ] Conflict detection and resolution\n- [ ] Diff display before sync\n- [ ] Undo support\n\n## Key Design Decisions\n\n1. **No state tracking files** - direct file comparison\n2. **Project config in .skillbook/** - per-project harness preferences\n3. **Git is enabler, CLI is interface** - users don't need to know git\n4. **Harness files are committed** - works for non-skillbook users\n\nSee docs/SKILL-SYNC-VISION.md for full architecture details.","status":"closed","priority":1,"issue_type":"task","owner":"kurochenko@gmail.com","created_at":"2026-01-24T11:55:28.910066+01:00","created_by":"Andrej Kurocenko","updated_at":"2026-01-24T11:55:41.23254+01:00","closed_at":"2026-01-24T11:55:41.23254+01:00","close_reason":"Duplicate of skill-book-db8"}
{"id":"skill-book-80j","title":"Improve bulk add status and conflict display logic","description":"## Overview\n\nRefactor the bulk add command to properly handle status and conflict indicators based on the relationship between project files and the library.\n\n## Current Problems\n\n1. `[synced] ⚠ duplicate` makes no sense - synced files are identical to library, so identical to each other\n2. No diff information shown for `[changed]` status\n3. \"Duplicate\" is misleading - should indicate actual content conflicts, not just same name\n\n## Status Definitions\n\n| Status | Meaning |\n|--------|---------|\n| `[new]` | Skill name NOT in library |\n| `[synced]` | Skill name in library AND content IDENTICAL |\n| `[changed +N/-M]` | Skill name in library AND content DIFFERS (show git-style diff) |\n\n## Conflict Logic\n\n**Key insight**: Status and Conflict are NOT orthogonal.\n\n- `[synced]` can NEVER have conflict (by definition, all synced files match library, thus match each other)\n- `[new]` CAN have conflict (multiple projects, different content)\n- `[changed]` CAN have conflict (multiple projects, different changes)\n\n### Conflict indicator rules:\n\n```\nShow \"⚠ N versions\" only when:\n1. Same skill name in 2+ locations AND\n2. NOT all synced AND\n3. Content actually differs between locations\n```\n\n## Display Matrix\n\n### A) Skill NOT in library\n\n| Locations | Content | Display |\n|-----------|---------|---------|\n| 1 project | - | `[new]` |\n| 2+ projects | All identical | `[new]` (pick any) |\n| 2+ projects | Different | `[new] ⚠ N versions` |\n\n### B) Skill IN library\n\n| Locations | Content vs Library | Display |\n|-----------|-------------------|---------|\n| 1 project | Same | `[synced]` |\n| 1 project | Different | `[changed +N/-M]` |\n| 2+ projects | All same as library | `[synced]` |\n| 2+ projects | All same but ≠ library | `[changed +N/-M]` |\n| 2+ projects | Mixed/different | Individual status + `⚠ N versions` if content differs |\n\n## Implementation Tasks\n\n- [ ] Add diff calculation function (line additions/deletions vs library)\n- [ ] Update `SkillStatus` type to include diff stats\n- [ ] Update `hasDuplicates` logic to only flag actual content conflicts\n- [ ] Update display formatting to show `[changed +N/-M]`\n- [ ] Remove conflict indicator for `[synced]` items\n\n## Test Scenarios (Integration Tests Required)\n\n### New skills\n- [ ] Single new skill shows `[new]`\n- [ ] Multiple locations, same content shows `[new]` (no conflict)\n- [ ] Multiple locations, different content shows `[new] ⚠ 2 versions`\n\n### Synced skills\n- [ ] Single synced skill shows `[synced]`\n- [ ] Multiple synced (same content) shows `[synced]` (NO conflict indicator)\n\n### Changed skills\n- [ ] Single changed skill shows `[changed +N/-M]` with correct diff\n- [ ] Multiple changed, same changes shows `[changed +N/-M]` (no conflict)\n- [ ] Multiple changed, different changes shows `[changed +N/-M] ⚠ 2 versions`\n\n### Mixed scenarios\n- [ ] Same skill: 1 synced + 1 changed = changed shows conflict\n- [ ] Same skill: 1 new + 1 new different = both show conflict\n\n### Diff accuracy\n- [ ] Adding lines shows correct +N\n- [ ] Removing lines shows correct -M\n- [ ] Mixed changes show correct +N/-M\n- [ ] No changes (synced) shows no diff\n\n## Future Enhancements (Not in this PR)\n\n- Config file to track sync metadata (commit hash, timestamp)\n- `[outdated]` status when library updated after sync\n- `[modified]` status when project changed after sync\n- Merge assistance for true conflicts\n","status":"closed","priority":1,"issue_type":"task","owner":"kurochenko@gmail.com","created_at":"2026-01-24T10:54:18.249531+01:00","created_by":"Andrej Kurocenko","updated_at":"2026-01-24T11:53:45.438764+01:00","closed_at":"2026-01-24T11:53:45.438764+01:00","close_reason":"Implemented: DiffStats type, calculateDiff(), conflict logic (synced never shows conflict), [changed +N/-M] display format. 88 tests passing."}
{"id":"skill-book-8aa","title":"Add integration tests for CLI commands","description":"Add integration testing infrastructure for CLI commands.\n\n## Prerequisites\n\n1. Add `SKILLBOOK_LIBRARY` env var support in `src/lib/paths.ts`:\n   ```typescript\n   export const getLibraryPath = () =\u003e \n     process.env.SKILLBOOK_LIBRARY || expandPath(DEFAULT_LIBRARY_PATH)\n   ```\n\n## Test Infrastructure\n\n- Use temp directories for isolation (each test gets fresh library)\n- Run CLI as subprocess via `Bun.spawn`\n- Capture stdout/stderr for assertions\n- Clean up temp dirs after each test\n\n## Test Cases for `add` Command\n\n- [ ] Adds new skill to library\n- [ ] Skips when content identical\n- [ ] Prompts on overwrite (without --force)\n- [ ] Overwrites with --force\n- [ ] Extracts name from path correctly\n- [ ] Uses --name when provided\n- [ ] Errors on invalid path\n- [ ] Errors on non-.md file\n\n## Files to Create\n\n- `src/commands/__tests__/add.integration.test.ts`\n- Possibly `src/test-utils.ts` for shared test helpers","status":"open","priority":2,"issue_type":"task","owner":"kurochenko@gmail.com","created_at":"2026-01-23T19:27:41.289079+01:00","created_by":"Andrej Kurocenko","updated_at":"2026-01-23T19:27:41.289079+01:00"}
{"id":"skill-book-azn","title":"Project setup: Initialize TypeScript/Bun project","description":"Set up the skillbook project structure:\n\n- Initialize Bun project with `bun init`\n- Add dependencies: citty, @clack/prompts, picocolors\n- Create src/ directory structure\n- Set up package.json scripts\n- Create tsconfig.json\n\nDirectory structure:\n```\nsrc/\n├── cli.ts\n├── commands/\n├── lib/\n└── constants.ts\n```","status":"closed","priority":2,"issue_type":"task","owner":"kurochenko@gmail.com","created_at":"2026-01-23T18:00:53.22205+01:00","created_by":"Andrej Kurocenko","updated_at":"2026-01-23T18:14:32.508707+01:00","closed_at":"2026-01-23T18:14:32.508707+01:00","close_reason":"Project initialized with Bun, TypeScript, citty CLI framework, and placeholder commands"}
{"id":"skill-book-db8","title":"Architecture: Sparse checkout library + hard copy harness files","description":"## Overview\n\nImplement hard copies architecture for skill distribution. This replaces the symlink-based approach.\n\n## Why Hard Copies?\n\nSymlinks have critical issues:\n- Non-portable (breaks for non-skillbook users)\n- Git noise (symlinks to missing files)\n- Cross-platform problems\n- Clone doesn't resolve symlinks\n\n## Architecture (MVP - Simplified)\n\n```\n~/.config/skillbook/              # Master library (git repo)\n├── skills/beads/SKILL.md\n└── config.yaml                   # Global preferences (optional)\n\nproject/\n├── .skillbook/                   # Project config (gitignored)\n│   └── config.yaml               # Harness prefs + installed skills\n├── .claude/skills/               # Hard copies (committed)\n│   └── beads/SKILL.md\n├── .cursor/rules/                # Hard copies (committed)\n│   └── beads.md\n└── .gitignore                    # Contains: .skillbook/\n```\n\nNote: Skipping sparse checkout complexity for MVP. Direct library comparison.\n\n## MVP Tasks\n\n### Project Config\n- [ ] Create `.skillbook/config.yaml` schema\n- [ ] Read/write config functions in `src/lib/config.ts`\n- [ ] Auto-add `.skillbook/` to `.gitignore`\n\n### Update `init` Command\n- [ ] Change from symlinks to hard copies\n- [ ] Create `.skillbook/config.yaml` with selected harnesses\n- [ ] Record installed skills in config\n\n### New `install` Command\n- [ ] `skillbook install \u003cskill\u003e` - quick install\n- [ ] Use existing config for harnesses\n- [ ] If no config, TBD: fail / auto-detect / prompt\n\n### New `status` Command\n- [ ] Compare harness files to library\n- [ ] Show: synced, changed, local-only, not-installed\n- [ ] Use existing diff calculation from library.ts\n\n## Key Design Decisions\n\n1. **No sparse checkout for MVP** - direct library comparison\n2. **Project config in .skillbook/** - per-project harness preferences\n3. **Harness files are committed** - works for non-skillbook users\n\nSee docs/SKILL-SYNC-VISION.md for full details.","notes":"## Tracking Status Terminology (Git-Inspired)\n\nSkills have a **tracking status** describing their relationship to the library:\n\n| Status | Label | Meaning |\n|--------|-------|---------|\n| Not in library | [untracked] | Library doesn't track this skill yet |\n| In library, identical | [synced] | Tracked, up to date with library |\n| In library, local differs | [ahead +5/-3] | Tracked, local has changes not in library |\n| In library, library updated | [behind] | Tracked, library has newer version |\n| Both changed | [diverged] | Tracked, both have different changes |\n\n**Context-dependent visibility:**\n- add --bulk: untracked, synced, ahead (scans local files only)\n- status: All statuses (compares against project config)\n- pull: behind, diverged (checks library for updates)\n\nThis maps cleanly to git mental model:\n- Library = remote/origin\n- untracked = git untracked\n- synced = git clean/up-to-date\n- ahead = git ahead (local has unpushed changes)\n- behind = git behind (remote has changes to pull)\n- diverged = git diverged (both changed)","status":"in_progress","priority":1,"issue_type":"task","owner":"kurochenko@gmail.com","created_at":"2026-01-24T11:33:42.198602+01:00","created_by":"Andrej Kurocenko","updated_at":"2026-01-24T13:47:28.993672+01:00"}
{"id":"skill-book-e1v","title":"Implement bulk add (--bulk flag)","description":"## Summary\nScan project for skills from multiple tool locations and let user select which to add to library.\n\n## Command\n```bash\nskillbook add --bulk\n```\n\n## Behavior\n1. Scan these locations:\n   - `.claude/skills/*/SKILL.md` (Claude Code)\n   - `.cursor/rules/*.md` (Cursor)\n   - `.opencode/skills/*.md` (OpenCode)\n\n2. Show interactive multi-select with status indicators:\n   - `[new]` - not in library\n   - `[synced]` - already in library, content identical\n   - `[changed]` - in library but content differs\n\n3. Pre-select all `[new]` skills by default\n\n4. For each selected skill:\n   - Extract name using existing `extractSkillName()`\n   - Add to library (same logic as single `add`)\n   - Show summary at end\n\n## Implementation Notes\n- Reuse `extractSkillName()` from lib/skills.ts\n- Reuse `addSkillToLibrary()` from lib/library.ts\n- Use @clack/prompts multiselect for selection\n- Add `scanProjectSkills()` function to find all skills\n\n## Acceptance Criteria\n- [ ] `--bulk` flag triggers scan mode\n- [ ] Finds skills from all 3 tool locations\n- [ ] Shows status for each found skill\n- [ ] Multi-select with all new skills pre-selected\n- [ ] Adds selected skills to library\n- [ ] Shows summary of what was added","status":"closed","priority":2,"issue_type":"task","owner":"kurochenko@gmail.com","created_at":"2026-01-23T20:53:34.830152+01:00","created_by":"Andrej Kurocenko","updated_at":"2026-01-23T20:58:38.395801+01:00","closed_at":"2026-01-23T20:58:38.395801+01:00","close_reason":"Implemented bulk add with --bulk flag. Scans .claude/skills/, .cursor/rules/, .opencode/skills/. Shows [new]/[synced]/[changed] status. 58 tests passing."}
{"id":"skill-book-e35","title":"Create path helpers and constants","description":"Create utility modules for paths and constants:\n\nsrc/lib/paths.ts:\n- getLibraryPath() -\u003e ~/.config/skillbook\n- getSkillsPath() -\u003e ~/.config/skillbook/skills\n- expandHome() -\u003e expand ~ in paths\n\nsrc/constants.ts:\n- Tool configurations (name, skill path pattern, file naming)\n- Supported tools: claude-code, cursor, opencode\n\nThese are needed by add, init, and list commands.","status":"closed","priority":2,"issue_type":"task","owner":"kurochenko@gmail.com","created_at":"2026-01-23T18:01:03.376517+01:00","created_by":"Andrej Kurocenko","updated_at":"2026-01-23T18:14:47.000924+01:00","closed_at":"2026-01-23T18:14:47.000924+01:00","close_reason":"Path helpers created in src/lib/paths.ts and constants in src/constants.ts","dependencies":[{"issue_id":"skill-book-e35","depends_on_id":"skill-book-azn","type":"blocks","created_at":"2026-01-23T18:01:15.976988+01:00","created_by":"Andrej Kurocenko"}]}
{"id":"skill-book-ib0","title":"Implement skillbook list command","description":"Implement the `skillbook list` command:\n\n- Scan ~/.config/skillbook/skills/ directory\n- List all skill folders found\n- Show skill name (folder name)\n- Handle case when library doesn't exist yet\n\nExample output:\n```\nAvailable skills:\n  - beads\n  - typescript\n  - review-gitlab\n```","status":"closed","priority":2,"issue_type":"task","owner":"kurochenko@gmail.com","created_at":"2026-01-23T18:00:56.655017+01:00","created_by":"Andrej Kurocenko","updated_at":"2026-01-24T09:27:24.251148+01:00","closed_at":"2026-01-24T09:27:24.251148+01:00","close_reason":"Closed","dependencies":[{"issue_id":"skill-book-ib0","depends_on_id":"skill-book-0b8","type":"blocks","created_at":"2026-01-23T18:01:16.043855+01:00","created_by":"Andrej Kurocenko"},{"issue_id":"skill-book-ib0","depends_on_id":"skill-book-e35","type":"blocks","created_at":"2026-01-23T18:01:16.11132+01:00","created_by":"Andrej Kurocenko"}]}
{"id":"skill-book-ndj","title":"Implement skillbook add command","description":"Implement the `skillbook add \u003cpath\u003e` command.\n\n## Command Interface\n\n```bash\nskillbook add \u003cpath\u003e [--name \u003cname\u003e] [--force]\n\nArguments:\n  path              Path to skill file (required)\n\nOptions:\n  --name, -n        Skill name (optional, inferred from path if not provided)\n  --force, -f       Overwrite without asking\n```\n\n## Implementation Flow\n\n1. **Validate path**: Check file exists and is .md file\n\n2. **Determine skill name**:\n   - If --name provided: use it (validate: lowercase, alphanumeric, hyphens, 2-50 chars)\n   - Else: extract from path using patterns:\n     - `.claude/skills/\u003cname\u003e/SKILL.md` → name\n     - `.cursor/rules/\u003cname\u003e.md` → name\n     - `.opencode/skills/\u003cname\u003e.md` → name\n     - `\u003cfolder\u003e/SKILL.md` → folder name\n   - If cannot determine: error with suggestion to use --name\n\n3. **Ensure library exists**:\n   - If ~/.config/skillbook doesn't exist:\n     - Create directory\n     - `git init`\n     - Create skills/ subdirectory\n     - Initial commit: \"Initialize skillbook library\"\n\n4. **Check if skill exists in library**:\n   - If exists and --force: continue (overwrite)\n   - If exists and content identical: skip, print \"Skill 'X' already up to date\"\n   - If exists and differs: prompt \"Skill 'X' exists. Overwrite? [y/N]\"\n   - If not exists: continue\n\n5. **Write skill**:\n   - Create skills/\u003cname\u003e/ directory if needed\n   - Copy file to skills/\u003cname\u003e/SKILL.md\n\n6. **Git commit**:\n   - `git add skills/\u003cname\u003e/SKILL.md`\n   - `git commit -m \"Add skill: \u003cname\u003e\"` (or \"Update skill: \u003cname\u003e\")\n\n7. **Output**:\n   - Success message with library path\n   - Show git commit hash for reference\n\n## Name Validation\n\n```typescript\n// Valid: beads, typescript, review-gitlab, my-skill-2\n// Invalid: Beads, _beads, my skill, a, 123-skill\n/^[a-z][a-z0-9-]{1,49}$/\n```\n\n## Example Usage\n\n```bash\n# Basic usage - name inferred from path\nskillbook add .claude/skills/beads/SKILL.md\n# ✓ Added skill 'beads' to library (commit: abc123)\n\n# With explicit name\nskillbook add ./my-file.md --name typescript\n# ✓ Added skill 'typescript' to library (commit: def456)\n\n# Force overwrite\nskillbook add .claude/skills/beads/SKILL.md --force\n# ✓ Updated skill 'beads' in library (commit: ghi789)\n\n# Identical content\nskillbook add .claude/skills/beads/SKILL.md\n# ℹ Skill 'beads' already up to date, skipped\n```\n\n## Files to Create/Modify\n\n- `src/commands/add.ts` - Main command implementation\n- `src/lib/library.ts` - Library operations (init, add skill)\n- `src/lib/git.ts` - Git operations (init, commit)\n- `src/lib/skills.ts` - Skill name extraction and validation","status":"closed","priority":2,"issue_type":"task","owner":"kurochenko@gmail.com","created_at":"2026-01-23T18:00:58.331112+01:00","created_by":"Andrej Kurocenko","updated_at":"2026-01-23T19:27:46.880808+01:00","closed_at":"2026-01-23T19:27:46.880808+01:00","close_reason":"Implemented add command with name extraction, validation, git integration, overwrite handling","dependencies":[{"issue_id":"skill-book-ndj","depends_on_id":"skill-book-0b8","type":"blocks","created_at":"2026-01-23T18:01:16.176139+01:00","created_by":"Andrej Kurocenko"},{"issue_id":"skill-book-ndj","depends_on_id":"skill-book-e35","type":"blocks","created_at":"2026-01-23T18:01:16.239458+01:00","created_by":"Andrej Kurocenko"}]}
